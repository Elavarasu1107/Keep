<form class="w-50 mt-3" [formGroup]="noteForm">
    <mat-expansion-panel hideToggle id="note-expansion-panel" #panel>
        <mat-expansion-panel-header class="d-flex justify-content-between p-0" (click)="expandPanel($event)">
            <mat-panel-title class="">
                <input matInput class="bg-transparent border border-0 px-4" type="text" [placeholder]="inputPlaceHolder"
                    formControlName="title" (keydown.Space)="$event.stopImmediatePropagation()">
            </mat-panel-title>
            <mat-panel-description class="d-flex justify-content-end p-0 m-0 nei"
                [ngClass]="{'invisible': hidePanelIcons, 'visible': hidePanelIcons}">
                <div class="div-hover rounded-circle">
                    <button mat-icon-button aria-label="menu">
                        <mat-icon>check_box</mat-icon>
                    </button>
                </div>
                <div class="div-hover rounded-circle">
                    <button mat-icon-button aria-label="menu">
                        <mat-icon>brush</mat-icon>
                    </button>
                </div>
                <div class="div-hover rounded-circle">
                    <button mat-icon-button aria-label="menu">
                        <mat-icon>image</mat-icon>
                    </button>
                </div>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="p-0 position-relative" style="left: -10px;">
            <input matInput class="bg-transparent border border-0 w-100 px-2" type="text" placeholder="Take a note..."
                formControlName="description">
            <mat-chip-row *ngIf="getReminderDate() != null" class="mt-1" (removed)="removeReminder()">
                <h5 class="m-0">{{ getReminderDate() | date: 'medium' }}</h5>
                <button matChipRemove [attr.aria-label]="'remove reminder '">
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip-row>
            <mat-chip-row *ngIf="noteImage != undefined" class="mt-1" (removed)="noteImage=undefined">
                <h5 class="m-0">{{ noteImage.name }}</h5>
                <button matChipRemove [attr.aria-label]="'remove image '">
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip-row>
            <div *ngIf="getCollaborators().length != 0">
                <mat-chip-row *ngFor="let col of getCollaborators()" class="mt-1" (removed)="removeCollaborator(col)">
                    <h5 class="m-0">{{ col }}</h5>
                    <button matChipRemove [attr.aria-label]="'remove collaborator'">
                        <mat-icon>cancel</mat-icon>
                    </button>
                </mat-chip-row>
            </div>
            <div *ngIf="getLabels().length != 0">
                <mat-chip-row *ngFor="let label of getLabels()" class="mt-1" (removed)="removeLabels(label)">
                    <h5 class="m-0">{{ label }}</h5>
                    <button matChipRemove [attr.aria-label]="'remove label'">
                        <mat-icon>cancel</mat-icon>
                    </button>
                </mat-chip-row>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex justify-content-between">
                    <app-note-options (noteImage)="getImageData($event)"
                        (is_archive)="archiveWhileCreation($event)"></app-note-options>
                    <div class="mt-2">
                        <button class="bg-none border-0 btn btn-sm" aria-label="menu">
                            <span class="material-symbols-outlined" style="font-size: 19px;">undo</span>
                        </button>
                    </div>
                    <div class="mt-2">
                        <button class="bg-none border-0 btn btn-sm" aria-label="menu">
                            <span class="material-symbols-outlined" style="font-size: 19px;">redo</span>
                        </button>
                    </div>
                </div>
                <button id="panel-close" mat-button (click)="hideExpansionPanel($event)">Save</button>
            </div>
        </div>
    </mat-expansion-panel>
</form>
